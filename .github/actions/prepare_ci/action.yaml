name: Prepare CI
description: This action prepare CI that restore cachable items

runs:
    using: composite
    steps:
        - uses: actions/setup-node@6044e13b5dc448c55e2357c09f80417699197238 # v6.2.0
          with:
              node-version: 24
              cache: 'npm'

        # - https://nodejs.org/docs/latest-v19.x/api/corepack.html
        # - https://nodejs.org/docs/latest-v19.x/api/corepack.html
        - name: Enable corepack
          shell: bash
          # See https://github.com/nodejs/corepack/issues/616
          # We install the latest corepack to avoid an installation problem.
          run: |
              npm install -g corepack@latest
              corepack enable

        - name: Install dependencies
          shell: bash
          run: npm ci
